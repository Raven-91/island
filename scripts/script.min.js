
'use strict';$(document).ready(()=>{new WOW({animateClass:'animate__animated',}).init();let headerBurger=$('.header__burger');headerBurger.click(()=>{$('.header__burger, .header__content').toggleClass('active');$('body').toggleClass('lock');})
const anchors=$('a[href*="#"]');for(let anchor of anchors){anchor.addEventListener("click",function(event){event.preventDefault();const blockID=anchor.getAttribute('href')
document.querySelector(''+blockID).scrollIntoView({behavior:"smooth",block:"start"})})}
let btnOpenVideo=document.getElementsByClassName('video__player')[0];let videoClip=document.getElementsByClassName('video__clip')[0];let videoSection=document.getElementById('video');btnOpenVideo.addEventListener('click',()=>{btnOpenVideo.style.display='none';videoClip.style.display='block';videoSection.style.background='none';})
new Swiper('.program-tour__swiper',{loop:true,grabCursor:true,slidesPerView:1,spaceBetween:10,autoHeight:true,navigation:{nextEl:'.program-tour__swiper-button-next',prevEl:'.program-tour__swiper-button-prev ',},pauseOnMouseEnter:true,});new Swiper('.feedbacks__swiper',{loop:false,grabCursor:true,slidesPerView:1,spaceBetween:10,autoHeight:true,navigation:{nextEl:'.feedbacks__swiper-button-next',prevEl:'.feedbacks__swiper-button-prev',},});new Swiper('.gallery__swiper',{loop:false,slideToClickedSlide:false,grabCursor:true,autoHeight:true,pagination:{el:'.swiper-pagination',type:'bullets',dynamicBullets:true,dynamicMainBullets:4,},navigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev',},})
let mapPointsContainer=document.getElementsByClassName('map')[0];let mapPoint=document.getElementsByClassName('map__point');let cardItem=document.getElementsByClassName('cards__item');let selectedMapPoint;mapPointsContainer.addEventListener('click',event=>{if(event.target.className==='map__point'){if(selectedMapPoint){selectedMapPoint.classList.remove('highlight');}
selectedMapPoint=event.target;selectedMapPoint.classList.add('highlight');}
for(let i=0;i<mapPoint.length;i++){if(event.target===mapPoint[i]){cardItem[i].classList.remove('hide');}else{cardItem[i].classList.add('hide');}}});$('.cards__image-link').magnificPopup({type:'image'});$('.slide-card__gallery').magnificPopup({delegate:'a',type:'image',gallery:{enabled:true}});let phone=$("input[name*='phone']");phone.mask('+7 (000) 000-00-00');let loader=$('.loader');let name=$("input[name*='name']");let radioInputs=$("input[name=number]");let radioLabels=$('.form__number-item-label');let radioInputsList=$('.form__number-list');let selectedLabel;radioInputsList[0].onclick=function(event){let target=event.target;while(target!==this){if(target.tagName==='LABEL'){highlight(target);return;}
target=target.parentNode;}}
function highlight(node){if(selectedLabel){selectedLabel.classList.remove('highlight');}
selectedLabel=node;selectedLabel.classList.add('highlight');}
$('.button').click(function(e){let hasError=false;e.preventDefault();$('.form__warning-message').hide();if(!radioInputs.filter(":checked").val()){radioLabels.css('border','3px solid #ff0000');radioInputsList.next().show();hasError=true;}else{radioLabels.css('border','1px solid #ffffff');}
if(!name.val()){name.css('border','3px solid #ff0000');name.next().show();hasError=true;}else{name.css('border','3px solid #128e12');}
if(!phone.val()){phone.css('border','3px solid #ff0000');phone.next().show();hasError=true;}else{phone.css('border','3px solid #128e12');}
if(!hasError){loader.css('display','flex');$.ajax({method:"POST",url:"https://testologia.site/checkout",data:{number:radioInputs.filter(":checked").val(),name:name.val(),phone:phone.val()}}).done(function(msg){let form=$('.form');loader.hide();if(msg.success){let bookingBody=$('.booking__body');console.log(msg.success);form.remove();$('.booking__title').remove();let newElement1=$("<div class='message-about-success-thank'></div>").text("Спасибо за вашу заявку!");let newElement2=$("<div class='message-about-success-connect'></div>").text("Мы скоро свяжемся с Вами.");bookingBody.css({"display":"flex","flex-direction":"column","justify-content":"center","align-items":"center","gap":"50px","font-size":"24px","text-align":"center",})
bookingBody.append(newElement1,newElement2);}else{console.log(msg.success);alert('Возникла ошибка при отправки заявки, свяжитесь, пожалуйста, с нами по телефону');form[0].reset();radioLabels.css('border','1px solid #ffffff');name.css('border','1px solid #ffffff');phone.css('border','1px solid #ffffff');}});}})})